/**
 * @file
 * responsivelazyloader JQuery plugin
 * @see : http://jetmartin.github.io/responsive-lazy-loader
 * Version 0.1.7
 */
(function(e){e.fn.responsivelazyloader=function(t){function o(t){var r="defaults",i=e(t);for(display in n.displays){if(i.hasClass(n.displays[display].gridClass)||i.closest(n.displays[display].parent!=undefined?n.displays[display].parent:"."+n.displays[display].gridClass).hasClass(n.displays[display].gridClass)){r=display;break}}i.attr("data-display",r)}function u(t){var r=e(t);if(!r.attr("data-display")){o(r)}var i=r.attr("data-display"),u=null;if(i){if(n.displays[i]){if(n.displays[i].display[s]){u=n.displays[i].display[s]}else if(n.displays[i].display.defaults){u=n.displays[i].display.defaults}}}if(!u){if(n.displays.defaults.display[s]){u=n.displays.defaults.display[s]}else{u=n.displays.defaults.display.defaults}}if(r.attr("data-src-"+i+"-"+s)){return r.attr("data-src-"+i+"-"+s).replace(n.token,u)}else if(r.attr("data-src-"+i)){return r.attr("data-src-"+i).replace(n.token,u)}else if(r.attr("data-src-"+s)){return r.attr("data-src-"+s).replace(n.token,u)}else if(r.attr("data-src")){return r.attr("data-src").replace(n.token,u)}else{return r.attr("src")}}function a(t,n,r){e(t).each(function(){var t=e(this);if(f(t,n)||n.force===true){if(t.attr("data-current-mediaq")!=s){t.attr("data-current-mediaq",s);l(t,r);t.fadeIn(400)}}})}function f(t,n){var r=e(t),i=e(window).height(),s=e(window).width(),o=e(window).scrollTop()-n["distance"],u=o+i+n["distance"]*2,a=e(window).scrollLeft()-n["distance"],f=a+s+n["distance"]*2,l=r.height(),c=r.width(),h=r.offset().top-n["distance"],p=h+l+n["distance"],d=r.offset().left-n["distance"],v=d+c+n["distance"];return(u>=h&&o<=h||u>=p&&o<=p)&&(f>=d&&a<=d||f>=v&&a<=v)}function l(t,r){var o=e(t),a=o.is("img");o.hide().one("load",function(){var t=e(this);if("naturalWidth"in this!==true||"naturalHeight"in this!==true){t.hide().css("width","auto");this.naturalWidth=t.width();this.naturalHeight=t.height();t.show()}e.event.trigger({type:"responsiveImageLoaded",image:t});if(t.attr("data-loaded")==undefined){i-=1;t.attr("data-loaded",true)}if(r===undefined||r==="load"||r==="scroll"&&n.useScroll||r==="resize"&&n.useResize){n.onImageShow.call(t)}if(i===0){n.onAllImagesLoad.call(images,{query:s});i=images.length}t.off("error")}).each(function(){var t=e(this);if(t.width>0&&t.height>0){t.trigger("load")}}).one("error",function(){var t=e(this);if(t.attr("src")!==""&&a||t.css("background-image")&&!a){if(t.attr("data-loaded")==undefined){i-=1;t.attr("data-loaded",true)}n.onImageError()}}).each(function(){var t=e(this);if(a){t.attr("src",null).attr("src",u(o))}else{t.css("background-image","url("+u(o)+")")}})}var n=e.extend(e.fn.responsivelazyloader.defaults,t),r=e(this),i=r.length;if(i>0){var s=e.fn.responsivelazyloader.getCurrentMediaQuery();e(document).ready(function(){a(r,n,"load")});e(window).bind("scroll",function(){a(r,n,"scroll")});e(window).resize(function(){var t=e.fn.responsivelazyloader.getCurrentMediaQuery();if(s!=t){e.event.trigger({type:"onMediaqueryChange",CurrentMediaQuery:t,PreviousMediaQuery:s});s=t;a(r,n,"resize")}})}return e(this)};e.fn.responsivelazyloader.is_valid_mediaQuery=function(e){if("matchMedia"in window){return window.matchMedia(e).matches}else if(Modernizr){return Modernizr.mq(e)}return false};e.fn.responsivelazyloader.getCurrentMediaQuery=function(){var t="defaults";var n=e.fn.responsivelazyloader.defaults;for(m in n.mediaQueries){if(e.fn.responsivelazyloader.is_valid_mediaQuery(n.mediaQueries[m])){t=m}}return t};e.fn.responsivelazyloader.defaults={distance:0,force:false,useScroll:true,useResize:true,token:"[[display]]",mediaQueries:{phone:"(max-width: 460px)",tablet:"(min-width: 461px) and (max-width: 991px)",desktop:"(min-width: 992px)"},displays:{defaults:{display:{tablet:"tablet",phone:"phone",defaults:"desktop"}}},onImageShow:function(){},onImageError:function(){},onAllImagesLoad:function(){}}})(jQuery)